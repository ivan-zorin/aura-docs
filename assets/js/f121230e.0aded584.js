"use strict";(self.webpackChunk_localzet_aura_docs=self.webpackChunk_localzet_aura_docs||[]).push([[7459],{177:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>p});const o=JSON.parse('{"id":"install/reverse-proxies/angie","title":"Angie","description":"Reverse proxy with automatic SSL certificates","source":"@site/docs/install/reverse-proxies/angie.md","sourceDirName":"install/reverse-proxies","slug":"/install/reverse-proxies/angie","permalink":"/docs/install/reverse-proxies/angie","draft":false,"unlisted":false,"editUrl":"https://github.com/localzet/aura-docs/tree/main/docs/install/reverse-proxies/angie.md","tags":[],"version":"current","lastUpdatedBy":"Ivan Zorin","lastUpdatedAt":1750179473000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Angie","description":"Reverse proxy with automatic SSL certificates"},"sidebar":"tutorialSidebar","previous":{"title":"Try Cloudflare","permalink":"/docs/install/reverse-proxies/try-cloudflare"},"next":{"title":"Aura Node","permalink":"/docs/install/aura-node"}}');var i=r(4848),t=r(8453),a=r(4499),s=r(4446);const l={sidebar_position:5,title:"Angie",description:"Reverse proxy with automatic SSL certificates"},c=void 0,d={},p=[{value:"Overview",id:"overview",level:2},...a.RM,{value:"Create a folder for Angie",id:"create-a-folder-for-angie",level:3},{value:"Angie configuration",id:"angie-configuration",level:2},{value:"Simple configuration",id:"simple-configuration",level:3},{value:"Create docker-compose.yml",id:"create-docker-composeyml",level:3},{value:"Start the container",id:"start-the-container",level:3},...s.RM];function h(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"In this guide we will be using Angie as a reverse proxy to access the Aura panel.\r\nWe will point a domain name to our server and configure Angie."}),"\n",(0,i.jsx)(a.Ay,{}),"\n",(0,i.jsx)(n.h3,{id:"create-a-folder-for-angie",children:"Create a folder for Angie"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p /opt/aura/angie && cd /opt/aura/angie\n"})}),"\n",(0,i.jsx)(n.h2,{id:"angie-configuration",children:"Angie configuration"}),"\n",(0,i.jsx)(n.h3,{id:"simple-configuration",children:"Simple configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Create a file called ",(0,i.jsx)(n.code,{children:"angie.conf"})," in the ",(0,i.jsx)(n.code,{children:"/opt/aura/angie"})," directory."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd /opt/aura/angie && nano angie.conf\n"})}),"\n",(0,i.jsx)(n.p,{children:"Paste the following configuration."}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsxs)(n.p,{children:["Please, replace ",(0,i.jsx)(n.code,{children:"REPLACE_WITH_YOUR_DOMAIN"})," with your domain name."]}),(0,i.jsx)(n.p,{children:"Review the configuration below, look for red highlighted lines."})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-angie",metastring:'title="angie.conf"',children:'upstream aura-backend {\r\n    server aura-backend:3000;\r\n}\r\n\r\n# Connection header for WebSocket reverse proxy\r\nmap $http_upgrade $connection_upgrade {\r\n    default upgrade;\r\n    "" close;\r\n}\r\n\r\nresolver 1.1.1.1 1.0.0.1 8.8.8.8 8.8.4.4 208.67.222.222 208.67.220.220;\r\n\r\nacme_client acme_le https://acme-v02.api.letsencrypt.org/directory;\r\n\r\nserver {\r\n    // highlight-next-line-red\r\n    server_name REPLACE_WITH_YOUR_DOMAIN;\r\n\r\n    listen 443 ssl reuseport;\r\n    listen [::]:443 ssl reuseport;\r\n    http2 on;\r\n\r\n    acme acme_le;\r\n\r\n    # SSL Configuration (Mozilla Intermediate)\r\n    ssl_protocols TLSv1.2 TLSv1.3;\r\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-CHACHA20-POLY1305;\r\n    ssl_session_timeout 1d;\r\n    ssl_session_cache shared:SSL:1m;\r\n    ssl_session_tickets off;\r\n    ssl_certificate $acme_cert_acme_le;\r\n    ssl_certificate_key $acme_cert_key_acme_le;\r\n\r\n    location / {\r\n        proxy_http_version 1.1;\r\n        proxy_pass http://remnawave;\r\n        proxy_set_header Host $host;\r\n        proxy_set_header Upgrade $http_upgrade;\r\n        proxy_set_header Connection $connection_upgrade;\r\n        proxy_set_header X-Real-IP $remote_addr;\r\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto $scheme;\r\n    }\r\n\r\n    # Gzip Compression\r\n    gzip on;\r\n    gzip_vary on;\r\n    gzip_proxied any;\r\n    gzip_comp_level 6;\r\n    gzip_buffers 16 8k;\r\n    gzip_http_version 1.1;\r\n    gzip_min_length 256;\r\n    gzip_types\r\n        application/atom+xml\r\n        application/geo+json\r\n        application/javascript\r\n        application/x-javascript\r\n        application/json\r\n        application/ld+json\r\n        application/manifest+json\r\n        application/rdf+xml\r\n        application/rss+xml\r\n        application/xhtml+xml\r\n        application/xml\r\n        font/eot\r\n        font/otf\r\n        font/ttf\r\n        image/svg+xml\r\n        text/css\r\n        text/javascript\r\n        text/plain\r\n        text/xml;\r\n}\r\n\r\nserver {\r\n    listen 443 ssl default_server;\r\n    listen [::]:443 ssl default_server;\r\n    server_name _;\r\n\r\n    ssl_reject_handshake on;\r\n}\r\n\r\nserver {\r\n    listen 80;\r\n    return 444; # https://angie.software/angie/docs/configuration/acme/#http\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"create-docker-composeyml",children:"Create docker-compose.yml"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file in the ",(0,i.jsx)(n.code,{children:"/opt/aura/angie"})," directory."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd /opt/aura/angie && nano docker-compose.yml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Paste the following configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:"services:\r\n    remnawave-angie:\r\n        image: docker.angie.software/angie:1.9.0\r\n        container_name: remnawave-angie\r\n        hostname: remnawave-angie\r\n        restart: always\r\n        ports:\r\n            - '0.0.0.0:443:443'\r\n            - '0.0.0.0:80:80'\r\n        networks:\r\n            - aura-network\r\n        volumes:\r\n            - angie-ssl-data:/var/lib/angie/acme/\r\n            - ./angie.conf:/etc/angie/http.d/default.conf:ro\r\n\r\nnetworks:\r\n    aura-network:\r\n        name: aura-network\r\n        driver: bridge\r\n        external: true\r\n\r\nvolumes:\r\n    angie-ssl-data:\r\n        driver: local\r\n        external: false\r\n        name: angie-ssl-data\n"})}),"\n",(0,i.jsx)(n.h3,{id:"start-the-container",children:"Start the container"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose up -d && docker compose logs -f -t\n"})}),"\n",(0,i.jsx)(s.Ay,{})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},4446:(e,n,r)=>{r.d(n,{Ay:()=>s,RM:()=>t});var o=r(4848),i=r(8453);const t=[{value:"Open the panel in the browser",id:"open-the-panel-in-the-browser",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}];function a(e){const n={h2:"h2",h3:"h3",img:"img",p:"p",...(0,i.R)(),...e.components},{Button:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Button",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"open-the-panel-in-the-browser",children:"Open the panel in the browser"}),"\n",(0,o.jsx)(n.p,{children:"Open the configured domain name in the browser and you will see the login page."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"login-page",src:r(3935).A+"",width:"960",height:"720"})}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(t,{label:"Ask community",link:"https://t.me/+YxzE4bOmEog2Zjhi",variant:"secondary",size:"md",outline:!0,style:{marginBottom:"1rem"}})]})}function s(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},4499:(e,n,r)=>{r.d(n,{Ay:()=>s,RM:()=>t});var o=r(4848),i=r(8453);const t=[{value:"Point domain to your server",id:"point-domain-to-your-server",level:2},{value:"DNS provider",id:"dns-provider",level:3}];function a(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsx)(n.p,{children:"You need to have a registered domain name to continue."})}),"\n",(0,o.jsx)(n.h2,{id:"point-domain-to-your-server",children:"Point domain to your server"}),"\n",(0,o.jsx)(n.p,{children:"Check your server's IP address. It is better to use a static IPv4 address."}),"\n",(0,o.jsx)(n.p,{children:"Now, you need to point your domain name to this IP address."}),"\n",(0,o.jsxs)(n.p,{children:["For example, it will be ",(0,o.jsx)(n.code,{children:"my-super-panel.com"})," -> ",(0,o.jsx)(n.code,{children:"193.122.122.122"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"There are two ways to do this:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Use a DNS provider (e.g. Cloudflare, Google Cloud, etc.)"}),"\n",(0,o.jsx)(n.li,{children:"Use a registrar (e.g. Namecheap, etc.)"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"dns-provider",children:"DNS provider"}),"\n",(0,o.jsx)(n.p,{children:"If you are using Cloudflare, you need to add a A/AAAA record (for IPv4 and IPv6 respectively) to your DNS records."}),"\n",(0,o.jsxs)(n.p,{children:["Log in to your Cloudflare account ",(0,o.jsx)(n.a,{href:"https://dash.cloudflare.com/login",children:"here"})," and select the desired domain."]}),"\n",(0,o.jsxs)(n.p,{children:["On the left side of the page, click on ",(0,o.jsx)(n.code,{children:"DNS"})," and then click on ",(0,o.jsx)(n.code,{children:"Records"}),". Click on ",(0,o.jsx)(n.code,{children:"Create record"}),".",(0,o.jsx)(n.br,{}),"\n","Set the ",(0,o.jsx)(n.code,{children:"Type"})," to ",(0,o.jsx)(n.code,{children:"A"})," and the ",(0,o.jsx)(n.code,{children:"Name"})," to ",(0,o.jsx)(n.code,{children:"@"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["If you want to use subdomains, you should enter the subdomain name (e.g. ",(0,o.jsx)(n.code,{children:"panel"}),") in the ",(0,o.jsx)(n.code,{children:"Name"})," field."]})}),"\n",(0,o.jsxs)(n.p,{children:["Enter your server's IP address in the ",(0,o.jsx)(n.code,{children:"IPv4 address"})," field. and click on ",(0,o.jsx)(n.code,{children:"Save"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Now you need to wait a while for the DNS records to be updated."}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsx)(n.p,{children:"There is a big difference between yellow cloud (domain is proxied by Cloudflare) and grey cloud (domain is not proxied by Cloudflare) in the Cloudflare control panel."}),(0,o.jsx)(n.p,{children:"If Cloudflare works fine in your region, it is better to proxy the domain through Cloudflare. (Yellow cloud)"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"static",src:r(7789).A+"",width:"1246",height:"529"})}),"\n",(0,o.jsx)(n.p,{children:"Some DNS providers have a different interface, but the overall process is the same."})]})}function s(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},7789:(e,n,r)=>{r.d(n,{A:()=>o});const o=r.p+"assets/images/cloudflare-dns-bd3780300a96c4c5995bc0a9c86d21d9.webp"},3935:(e,n,r)=>{r.d(n,{A:()=>o});const o=r.p+"assets/images/login-page-6236b327e75fd1535d4c5f275eabbd20.webp"},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>s});var o=r(6540);const i={},t=o.createContext(i);function a(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);