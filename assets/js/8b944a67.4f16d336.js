"use strict";(self.webpackChunk_localzet_aura_docs=self.webpackChunk_localzet_aura_docs||[]).push([[5706],{799:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>d,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"sdk/typescript-sdk","title":"TypeScript SDK","description":"} title=\\"Official SDK\\">","source":"@site/docs/sdk/typescript-sdk.md","sourceDirName":"sdk","slug":"/sdk/typescript-sdk","permalink":"/docs/sdk/typescript-sdk","draft":false,"unlisted":false,"editUrl":"https://github.com/localzet/aura-docs/tree/main/docs/sdk/typescript-sdk.md","tags":[],"version":"current","lastUpdatedBy":"Ivan Zorin","lastUpdatedAt":1750179473000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"TypeScript SDK"},"sidebar":"tutorialSidebar","previous":{"title":"WARP outbound over WireGuard (Without warp-cli)","permalink":"/docs/guides/warp-outbound-over-wg"},"next":{"title":"Python SDK","permalink":"/docs/sdk/python-sdk"}}');var s=n(4848),i=n(8453),o=n(2362),a=n(8027);const d={sidebar_position:1,title:"TypeScript SDK"},c=void 0,l={},h=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Full examples",id:"full-examples",level:2}];function p(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{type:"tip",icon:(0,s.jsx)(a.A7C,{}),title:"Official SDK",children:(0,s.jsx)(r.p,{children:"This SDK is official and maintained by the Aura team."})}),"\n",(0,s.jsx)(r.p,{children:"Aura TypeScript SDK is a library for convenient interaction with the RestAPI types."}),"\n",(0,s.jsx)(r.p,{children:"It does not contain http-client, so you need to implement it yourself."}),"\n",(0,s.jsx)(r.p,{children:"This SDK can be used in backend and frontend."}),"\n","\n",(0,s.jsx)(r.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"npm install @localzet/aura-contract\n"})}),"\n",(0,s.jsx)(r.admonition,{type:"warning",children:(0,s.jsx)(r.p,{children:"Always pick and pin the correct version of the SDK to match the version of the Aura backend."})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Contract Version"}),(0,s.jsx)(r.th,{children:"Aura Panel Version"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.7.16"}),(0,s.jsx)(r.td,{children:"1.6.7"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.7.16"}),(0,s.jsx)(r.td,{children:"1.6.6"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.7.13"}),(0,s.jsx)(r.td,{children:"1.6.5"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.7.13"}),(0,s.jsx)(r.td,{children:"1.6.4"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.7.13"}),(0,s.jsx)(r.td,{children:"1.6.3"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.7.1"}),(0,s.jsx)(r.td,{children:"1.6.2"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.7.1"}),(0,s.jsx)(r.td,{children:"1.6.1"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.7.0"}),(0,s.jsx)(r.td,{children:"1.6.0"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.4.5"}),(0,s.jsx)(r.td,{children:"1.5.7"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"0.3.71"}),(0,s.jsx)(r.td,{children:"1.5.0"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Example backend service, using Axios and NestJS"}),(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import axios from 'axios'\r\n\r\nimport { Injectable, Logger } from '@nestjs/common'\r\nimport { ConfigService } from '@nestjs/config'\r\n\r\nimport { GetUserByUsernameCommand } from '@localzet/aura-contract'\r\n\r\nimport { ICommandResponse } from '../types/command-response.type'\r\n\r\n@Injectable()\r\nexport class AxiosService {\r\n    public axiosInstance: AxiosInstance\r\n    private readonly logger = new Logger(AxiosService.name)\r\n\r\n    constructor(private readonly configService: ConfigService) {\r\n        this.axiosInstance = axios.create({\r\n            baseURL: this.configService.getOrThrow('REMNAWAVE_PANEL_URL'),\r\n            timeout: 45_000,\r\n            headers: {\r\n                // highlight-next-line-green\r\n                'x-forwarded-for': '127.0.0.1', // use this headers to bypass the panel reverse proxy restrictions. So you can access the panel from bridge networks: http://aura-backend:3000\r\n                // highlight-next-line-green\r\n                'x-forwarded-proto': 'https', // use this headers to bypass the panel reverse proxy restrictions. So you can access the panel from bridge networks: http://aura-backend:3000\r\n                Authorization: `Bearer ${this.configService.get('REMNAWAVE_API_TOKEN')}`\r\n            }\r\n        })\r\n\r\n        const caddyAuthApiToken = this.configService.get('CADDY_AUTH_API_TOKEN')\r\n\r\n        if (caddyAuthApiToken) {\r\n            this.axiosInstance.defaults.headers.common['X-Api-Key'] = caddyAuthApiToken\r\n        }\r\n    }\r\n\r\n    public async getUserByUsername(\r\n        username: string\r\n    ): Promise<ICommandResponse<GetUserByUsernameCommand.Response>> {\r\n        try {\r\n            const response = await this.axiosInstance.request<GetUserByUsernameCommand.Response>({\r\n                method: GetUserByUsernameCommand.endpointDetails.REQUEST_METHOD,\r\n                url: GetUserByUsernameCommand.url(username)\r\n            })\r\n\r\n            return {\r\n                isOk: true,\r\n                response: response.data\r\n            }\r\n        } catch (error) {\r\n            if (error instanceof AxiosError) {\r\n                this.logger.error('Error in Axios GetUserByUsername Request:', error.message)\r\n\r\n                return {\r\n                    isOk: false\r\n                }\r\n            } else {\r\n                this.logger.error('Error in GetUserByUsername Request:', error)\r\n\r\n                return {\r\n                    isOk: false\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n"})})]}),"\n",(0,s.jsx)(r.h2,{id:"full-examples",children:"Full examples"}),"\n",(0,s.jsxs)(r.p,{children:["You can find full examples in the ",(0,s.jsx)(r.a,{href:"https://github.com/localzet/aura-frontend",children:"Aura Frontend"})," repository and in the ",(0,s.jsx)(r.a,{href:"https://github.com/localzet/aura-subscriptions",children:"Aura Subscription page"})," repository."]})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);