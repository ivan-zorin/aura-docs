"use strict";(self.webpackChunk_localzet_aura_docs=self.webpackChunk_localzet_aura_docs||[]).push([[5062],{9713:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"install/aura-subscriptions","title":"Subscription Page","description":"Aura Subscription Page is lightweight and secure way to hide your Aura Panel domain from end users. You can use it as a simple and beautiful subscription page for your users.","source":"@site/docs/install/aura-subscriptions.md","sourceDirName":"install","slug":"/install/aura-subscriptions","permalink":"/docs/install/aura-subscriptions","draft":false,"unlisted":false,"editUrl":"https://github.com/localzet/aura-docs/tree/main/docs/install/aura-subscriptions.md","tags":[],"version":"current","lastUpdatedBy":"Ivan Zorin","lastUpdatedAt":1750179473000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Subscription Page"},"sidebar":"tutorialSidebar","previous":{"title":"Aura Node","permalink":"/docs/install/aura-node"},"next":{"title":"Environment Variables","permalink":"/docs/install/environment-variables"}}');var s=r(4848),t=r(8453);const a={sidebar_position:5,title:"Subscription Page"},o="Aura Subscription Page",l={},c=[{value:"Step 1 - Prepare .env file",id:"step-1---prepare-env-file",level:2},{value:"Step 2 - Create docker-compose.yml file",id:"step-2---create-docker-composeyml-file",level:2},{value:"Step 3 - Start the container",id:"step-3---start-the-container",level:2},{value:"Step 4 - Configure reverse proxy",id:"step-4---configure-reverse-proxy",level:2},{value:"Caddy",id:"caddy",level:3},{value:"Caddy with security settings",id:"caddy-with-security-settings",level:4},{value:"Nginx",id:"nginx",level:3},{value:"Traefik",id:"traefik",level:3},{value:"Step 5 - Usage",id:"step-5---usage",level:2},{value:"Configuring subscription page (optional)",id:"configuring-subscription-page-optional",level:2},{value:"Configuration Structure",id:"configuration-structure",level:3},{value:"Application Configuration Properties",id:"application-configuration-properties",level:3},{value:"Localization",id:"localization",level:3},{value:"Example App Configuration",id:"example-app-configuration",level:3},{value:"Optional Fields",id:"optional-fields",level:3},{value:"Additional Steps",id:"additional-steps",level:4},{value:"Base64 Encoding",id:"base64-encoding",level:4},{value:"Mounting custom template",id:"mounting-custom-template",level:3},{value:"Template Variables",id:"template-variables",level:4},{value:"Custom app-config.json (custom apps)",id:"custom-app-configjson-custom-apps",level:3},{value:"Full Example",id:"full-example",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"aura-subscription-page",children:"Aura Subscription Page"})}),"\n",(0,s.jsx)(n.p,{children:"Aura Subscription Page is lightweight and secure way to hide your Aura Panel domain from end users. You can use it as a simple and beautiful subscription page for your users."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Page screenshot",src:r(721).A+"",width:"1920",height:"1080"})}),"\n",(0,s.jsx)(n.h2,{id:"step-1---prepare-env-file",children:"Step 1 - Prepare .env file"}),"\n",(0,s.jsxs)(n.p,{children:["Edit the ",(0,s.jsx)(n.code,{children:"/opt/aura/.env"})," file and change ",(0,s.jsx)(n.code,{children:"SUB_PUBLIC_DOMAIN"})," to your subscription page domain name."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="Editing .env file"',children:"cd /opt/aura && nano .env\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Change ",(0,s.jsx)(n.code,{children:"SUB_PUBLIC_DOMAIN"})," to your subscription page domain name. Domain name must be without http or https."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title=".env file content"',children:"SUB_PUBLIC_DOMAIN=subscription.domain.com\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-2---create-docker-composeyml-file",children:"Step 2 - Create docker-compose.yml file"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="Creating docker-compose.yml file"',children:"mkdir -p /opt/aura/subscription && cd /opt/aura/subscription && nano docker-compose.yml\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml file content"',children:'services:\r\n    aura-subscriptions:\r\n        image: localzet/aura-subscriptions:latest\r\n        container_name: aura-subscriptions\r\n        hostname: aura-subscriptions\r\n        restart: always\r\n        environment:\r\n        // highlight-next-line-yellow\r\n            - REMNAWAVE_PANEL_URL=https://panel.com\r\n            - APP_PORT=3010\r\n            - META_TITLE="Subscription Page Title"\r\n            - META_DESCRIPTION="Subscription Page Description"\r\n        ports:\r\n            - \'127.0.0.1:3010:3010\'\r\n        networks:\r\n            - aura-network\r\n\r\nnetworks:\r\n    aura-network:\r\n        driver: bridge\r\n        external: true\n'})}),"\n",(0,s.jsxs)(n.admonition,{type:"danger",children:[(0,s.jsxs)(n.p,{children:["Please replace ",(0,s.jsx)(n.code,{children:"panel.com"})," with the URL at which the ",(0,s.jsx)(n.strong,{children:"Aura Dashboard"})," is available."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"REMNAWAVE_PANEL_URL"})," can be http (bridged Aura, example: ",(0,s.jsx)(n.code,{children:"http://aura-backend:3000"}),") or https (example: ",(0,s.jsx)(n.code,{children:"https://panel.com"}),")."]})]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"You can replace it parameter with, for example,"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"- CUSTOM_SUB_PREFIX=sub\n"})}),(0,s.jsxs)(n.p,{children:["to get an additional nested path for the subscription page.\r\nBut in that case, in the ",(0,s.jsx)(n.code,{children:".env"})," file for the ",(0,s.jsx)(n.code,{children:"remnawave"})," container, you will need to set the corresponding parameter correctly: ",(0,s.jsx)(n.code,{children:"SUB_PUBLIC_DOMAIN=link.domain.com/sub"}),".\r\nAnd you will need to specify similar changes to the valid path in your configurations for Nginx/Caddy."]})]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Full .env file reference"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title=".env file"',children:'APP_PORT=3010\r\n\r\n### Aura Panel URL, can be http://aura-backend:3000 or https://panel.example.com\r\nREMNAWAVE_PANEL_URL=https://panel.example.com\r\n\r\n\r\nMETA_TITLE="Subscription page"\r\nMETA_DESCRIPTION="Subscription page description"\r\n\r\n\r\n# Serve at custom root path, for example, this value can be: CUSTOM_SUB_PREFIX=sub\r\n# Do not place / at the start/end\r\nCUSTOM_SUB_PREFIX=\r\n\r\n\r\n\r\n# Support Marzban links\r\nMARZBAN_LEGACY_LINK_ENABLED=false\r\nMARZBAN_LEGACY_SECRET_KEY=\r\nREMNAWAVE_API_TOKEN=\r\n\r\n\r\n# If you use "Caddy with security" addon, you can place here X-Api-Key, which will be applied to requests to Aura Panel.\r\nCADDY_AUTH_API_TOKEN=\n'})})]}),"\n",(0,s.jsx)(n.h2,{id:"step-3---start-the-container",children:"Step 3 - Start the container"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="Starting the container"',children:"docker compose up -d && docker compose logs -f\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-4---configure-reverse-proxy",children:"Step 4 - Configure reverse proxy"}),"\n",(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsxs)(n.p,{children:["Aura and its components does not support being server on a sub-path. (e.g. ",(0,s.jsx)(n.code,{children:"location /subscription {"}),")"]}),(0,s.jsx)(n.p,{children:"It has to be served on the root path of a domain or subdomain."}),(0,s.jsxs)(n.p,{children:["For custom path, you can use the ",(0,s.jsx)(n.code,{children:"CUSTOM_SUB_PREFIX"})," parameter."]})]}),"\n",(0,s.jsx)(n.h3,{id:"caddy",children:"Caddy"}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Caddy configuration"}),(0,s.jsx)(n.p,{children:"If you have already configured Caddy all you need to do is add a new site block to the Caddyfile."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="Editing Caddyfile"',children:"cd /opt/aura/caddy && nano Caddyfile\n"})}),(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsxs)(n.p,{children:["Please replace ",(0,s.jsx)(n.code,{children:"SUBSCRIPTION_PAGE_DOMAIN"})," with your domain name."]}),(0,s.jsx)(n.p,{children:"Review the configuration below, look for green highlighted lines."})]}),(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsx)(n.p,{children:"Do not fully replace the existing configuration, only add a new site block to the existing Caddyfile."})}),(0,s.jsx)(n.p,{children:"Add a new site block to the end of configuration file."}),(0,s.jsx)(n.p,{children:"Pay attention to the green lines, they are the ones you need to add."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-caddy",metastring:'title="Caddyfile"',children:"https://REPLACE_WITH_YOUR_DOMAIN {\r\n        reverse_proxy * http://aura-backend:3000\r\n}\r\n:443 {\r\n    tls internal\r\n    respond 204\r\n}\r\n\r\n// highlight-next-line-green\r\nhttps://SUBSCRIPTION_PAGE_DOMAIN {\r\n// highlight-next-line-green\r\n        reverse_proxy * http://aura-subscriptions:3010\r\n// highlight-next-line-green\r\n}\n"})}),(0,s.jsx)(n.p,{children:"Now you need to restart Caddy container."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker compose down && docker compose up -d && docker compose logs -f\n"})}),(0,s.jsx)(n.h4,{id:"caddy-with-security-settings",children:"Caddy with security settings"}),(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["If you use Caddy configuration with security settings, you need to make some changes to the ",(0,s.jsx)(n.code,{children:"docker-compose"})," file of the subscription page."]})}),(0,s.jsxs)(n.p,{children:["Open ",(0,s.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /opt/aura/subscription && nano docker-compose.yml\n"})}),(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsxs)(n.p,{children:["Please use the docker container name and port (",(0,s.jsx)(n.code,{children:"http://aura-backend:3000"}),") instead of the panel URL (",(0,s.jsx)(n.code,{children:"https://panel.com"}),")."]}),(0,s.jsxs)(n.p,{children:["Review the configuration below, look for yellow highlighted line and make the necessary changes. Then copy the entire line highlighted in green and add it to the ",(0,s.jsx)(n.code,{children:"docker-compose"})," file."]})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:"environment:\r\n// highlight-next-line-green\r\n    - REMNAWAVE_PANEL_URL=http://aura-backend:3000\n"})}),(0,s.jsx)(n.p,{children:"Now, you need to restart the Subscription Page container."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker compose down && docker compose up -d && docker compose logs -f\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"nginx",children:"Nginx"}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Nginx configuration"}),(0,s.jsx)(n.p,{children:"If you have already configured Nginx, all you need to do is add a new location block to your configuration file."}),(0,s.jsx)(n.p,{children:"Issue a certificate for the subscription page domain name:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"acme.sh --issue --standalone -d 'SUBSCRIPTION_PAGE_DOMAIN' --key-file /opt/aura/nginx/subdomain_privkey.key --fullchain-file /opt/aura/nginx/subdomain_fullchain.pem --alpn --tlsport 8443\n"})}),(0,s.jsx)(n.p,{children:"Open Nginx configuration file:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /opt/aura/nginx && nano nginx.conf\n"})}),(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["Please replace ",(0,s.jsx)(n.code,{children:"SUBSCRIPTION_PAGE_DOMAIN"})," with your subscription page domain name."]})}),(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsx)(n.p,{children:"Do not fully replace the existing configuration, only add a new location block to your existing configuration file."})}),(0,s.jsx)(n.p,{children:"Add a new upstream block to the top of the configuration file."}),(0,s.jsx)(n.p,{children:"Pay attention to the green lines, they are the ones you need to add."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-nginx",metastring:'title="nginx.conf"',children:"upstream aura-backend {\r\n    server aura-backend:3000;\r\n}\r\n\r\n// highlight-next-line-green\r\nupstream aura-subscriptions {\r\n    // highlight-next-line-green\r\n    server aura-subscriptions:3010;\r\n    // highlight-next-line-green\r\n}\n"})}),(0,s.jsx)(n.p,{children:"Now add a new server block to the bottom of the configuration file."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-nginx",metastring:'title="nginx.conf"',children:'server {\r\n    // highlight-next-line-red\r\n    server_name SUBSCRIPTION_PAGE_DOMAIN;\r\n\r\n    listen 443 ssl;\r\n    listen [::]:443 ssl;\r\n    http2 on;\r\n\r\n    location / {\r\n        proxy_http_version 1.1;\r\n        proxy_pass http://aura-subscriptions;\r\n        proxy_set_header Host $host;\r\n        proxy_set_header Upgrade $http_upgrade;\r\n        proxy_set_header Connection $connection_upgrade;\r\n        proxy_set_header X-Real-IP $remote_addr;\r\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto $scheme;\r\n        proxy_set_header X-Forwarded-Host $host;\r\n        proxy_set_header X-Forwarded-Port $server_port;\r\n\r\n        proxy_send_timeout 60s;\r\n        proxy_read_timeout 60s;\r\n    }\r\n\r\n    # SSL Configuration (Mozilla Intermediate Guidelines)\r\n    ssl_protocols TLSv1.2 TLSv1.3;\r\n    ssl_ecdh_curve X25519:prime256v1:secp384r1;\r\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-CHACHA20-POLY1305;\r\n    ssl_prefer_server_ciphers off;\r\n\r\n    ssl_session_timeout 1d;\r\n    ssl_session_cache shared:MozSSL:10m; # ~40,000 sessions\r\n    ssl_dhparam "/etc/nginx/ssl/dhparam.pem";\r\n    ssl_certificate "/etc/nginx/ssl/subdomain_fullchain.pem";\r\n    ssl_certificate_key "/etc/nginx/ssl/subdomain_privkey.key";\r\n\r\n    # OCSP Stapling\r\n    ssl_stapling on;\r\n    ssl_stapling_verify on;\r\n    ssl_trusted_certificate "/etc/nginx/ssl/subdomain_fullchain.pem";\r\n    resolver 1.1.1.1 1.0.0.1 8.8.8.8 8.8.4.4 208.67.222.222 208.67.220.220;\r\n\r\n    # HTTP Strict Transport Security (HSTS)\r\n    proxy_hide_header Strict-Transport-Security;\r\n    add_header Strict-Transport-Security "max-age=15552000" always;\r\n\r\n    # Gzip Compression\r\n    gzip on;\r\n    gzip_vary on;\r\n    gzip_proxied any;\r\n    gzip_comp_level 6;\r\n    gzip_buffers 16 8k;\r\n    gzip_http_version 1.1;\r\n    gzip_min_length 256;\r\n    gzip_types\r\n    application/atom+xml\r\n    application/geo+json\r\n    application/javascript\r\n    application/x-javascript\r\n    application/json\r\n    application/ld+json\r\n    application/manifest+json\r\n    application/rdf+xml\r\n    application/rss+xml\r\n    application/xhtml+xml\r\n    application/xml\r\n    font/eot\r\n    font/otf\r\n    font/ttf\r\n    image/svg+xml\r\n    text/css\r\n    text/javascript\r\n    text/plain\r\n    text/xml;\r\n}\n'})}),(0,s.jsx)(n.p,{children:"Now lets modify the docker-compose.yml for Nginx to mount the new certificate files."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /opt/aura/nginx && nano docker-compose.yml\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:"services:\r\n    remnawave-nginx:\r\n        image: nginx:1.26\r\n        container_name: remnawave-nginx\r\n        hostname: remnawave-nginx\r\n        volumes:\r\n            - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro\r\n            - ./dhparam.pem:/etc/nginx/ssl/dhparam.pem:ro\r\n            - ./fullchain.pem:/etc/nginx/ssl/fullchain.pem:ro\r\n            - ./privkey.key:/etc/nginx/ssl/privkey.key:ro\r\n            // highlight-next-line-green\r\n            - ./subdomain_fullchain.pem:/etc/nginx/ssl/subdomain_fullchain.pem:ro\r\n            // highlight-next-line-green\r\n            - ./subdomain_privkey.key:/etc/nginx/ssl/subdomain_privkey.key:ro\r\n        restart: always\r\n        ports:\r\n            - '0.0.0.0:443:443'\r\n        networks:\r\n            - aura-network\r\n\r\nnetworks:\r\n    aura-network:\r\n        name: aura-network\r\n        driver: bridge\r\n        external: true\n"})}),(0,s.jsx)(n.p,{children:"Now you need to restart Nginx container."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker compose down && docker compose up -d && docker compose logs -f\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"traefik",children:"Traefik"}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Traefik configuration"}),(0,s.jsxs)(n.p,{children:["If you have already configured Traefik, you need to create a new dynamic configuration file called ",(0,s.jsx)(n.code,{children:"aura-subscriptions.yml"})," in the ",(0,s.jsx)(n.code,{children:"/opt/aura/traefik/config"})," directory."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /opt/aura/traefik/config && nano aura-subscriptions.yml\n"})}),(0,s.jsx)(n.p,{children:"Paste the following configuration."}),(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsxs)(n.p,{children:["Please replace ",(0,s.jsx)(n.code,{children:"SUBSCRIPTION_PAGE_DOMAIN"})," with your subscription page domain name."]}),(0,s.jsx)(n.p,{children:"Review the configuration below, look for yellow highlighted lines."})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="aura-subscriptions.yml"',children:'http:\r\n  routers:\r\n    aura-subscriptions:\r\n      // highlight-next-line-yellow\r\n      rule: "Host(`SUBSCRIPTION_PAGE_DOMAIN`)"\r\n      entrypoints:\r\n        - http\r\n      middlewares:\r\n        - aura-subscriptions-https-redirect\r\n      service: aura-subscriptions\r\n\r\n    aura-subscriptions-secure:\r\n      // highlight-next-line-yellow\r\n      rule: "Host(`SUBSCRIPTION_PAGE_DOMAIN`)"\r\n      entrypoints:\r\n        - https\r\n      middlewares:\r\n      tls:\r\n        certResolver: letsencrypt\r\n      service: aura-subscriptions\r\n\r\n  middlewares:\r\n    aura-subscriptions-https-redirect:\r\n      redirectScheme:\r\n        scheme: https\r\n\r\n  services:\r\n    aura-subscriptions:\r\n      loadBalancer:\r\n        servers:\r\n          - url: "http://aura-subscriptions:3010"\n'})})]}),"\n",(0,s.jsx)(n.h2,{id:"step-5---usage",children:"Step 5 - Usage"}),"\n",(0,s.jsxs)(n.p,{children:["The subscription page will be available at ",(0,s.jsx)(n.code,{children:"https://subdomain.panel.com/<shortUuid>"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"configuring-subscription-page-optional",children:"Configuring subscription page (optional)"}),"\n",(0,s.jsxs)(n.p,{children:["You can change available apps and their texts with editing the ",(0,s.jsx)(n.code,{children:"app-config.json"})," file."]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"app-config.json interface"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export interface IAppConfig {\r\n    id: `${Lowercase<string>}`\r\n    name: string\r\n    isFeatured: boolean\r\n    isNeedBase64Encoding?: boolean\r\n    urlScheme: string\r\n    installationStep: {\r\n        buttons: {\r\n            buttonLink: string\r\n            buttonText: {\r\n                en: string\r\n                fa: string\r\n                ru: string\r\n            }\r\n        }[]\r\n        description: {\r\n            en: string\r\n            fa: string\r\n            ru: string\r\n        }\r\n    }\r\n    addSubscriptionStep: {\r\n        description: {\r\n            en: string\r\n            fa: string\r\n            ru: string\r\n        }\r\n    }\r\n    connectAndUseStep: {\r\n        description: {\r\n            en: string\r\n            fa: string\r\n            ru: string\r\n        }\r\n    }\r\n    additionalBeforeAddSubscriptionStep?: {\r\n        buttons: {\r\n            buttonLink: string\r\n            buttonText: {\r\n                en: string\r\n                fa: string\r\n                ru: string\r\n            }\r\n        }[]\r\n        description: {\r\n            en: string\r\n            fa: string\r\n            ru: string\r\n        }\r\n        title: {\r\n            en: string\r\n            fa: string\r\n            ru: string\r\n        }\r\n    }\r\n    additionalAfterAddSubscriptionStep?: {\r\n        buttons: {\r\n            buttonLink: string\r\n            buttonText: {\r\n                en: string\r\n                fa: string\r\n                ru: string\r\n            }\r\n        }[]\r\n        description: {\r\n            en: string\r\n            fa: string\r\n            ru: string\r\n        }\r\n        title: {\r\n            en: string\r\n            fa: string\r\n            ru: string\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IPlatformConfig {\r\n    ios: IAppConfig[]\r\n    android: IAppConfig[]\r\n    pc: IAppConfig[]\r\n}\n"})})]}),"\n",(0,s.jsx)(n.p,{children:"This guide explains how to add client applications for different platforms to the Aura subscription page."}),"\n",(0,s.jsx)(n.h3,{id:"configuration-structure",children:"Configuration Structure"}),"\n",(0,s.jsxs)(n.p,{children:["Create a file named ",(0,s.jsx)(n.code,{children:"app-config.json"})," with the following structure:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n    "ios": [\r\n        /* iOS app configurations */\r\n    ],\r\n    "android": [\r\n        /* Android app configurations */\r\n    ],\r\n    "pc": [\r\n        /* Desktop app configurations */\r\n    ]\r\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Each platform contains an array of application configurations that follow the ",(0,s.jsx)(n.code,{children:"IAppConfig"})," interface."]}),"\n",(0,s.jsx)(n.h3,{id:"application-configuration-properties",children:"Application Configuration Properties"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Unique lowercase identifier for the app"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Display name of the application"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isFeatured"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Whether the app should be featured in the UI"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isNeedBase64Encoding"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Whether the subscription URL needs Base64 encoding"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"urlScheme"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"URL scheme for launching the app with subscription"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"installationStep"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Instructions for installing the application"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"addSubscriptionStep"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Instructions for adding a subscription"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"connectAndUseStep"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Instructions for connecting to VPN"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"additionalBeforeAddSubscriptionStep"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Optional additional steps before adding subscription"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"additionalAfterAddSubscriptionStep"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Optional additional steps after adding subscription"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"localization",children:"Localization"}),"\n",(0,s.jsx)(n.p,{children:"All user-facing text supports multiple languages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"description": {\r\n  "en": "English text",\r\n  "fa": "Persian text",\r\n  "ru": "Russian text"\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"example-app-configuration",children:"Example App Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Here's a simplified example for one application:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n    "id": "happ",\r\n    "name": "Happ",\r\n    "isFeatured": true,\r\n    "urlScheme": "happ://add/",\r\n    "installationStep": {\r\n        "buttons": [\r\n            {\r\n                "buttonLink": "https://apps.apple.com/us/app/happ-proxy-utility/id6504287215",\r\n                "buttonText": {\r\n                    "en": "Open in App Store",\r\n                    "fa": "\u0628\u0627\u0632 \u06a9\u0631\u062f\u0646 \u062f\u0631 App Store",\r\n                    "ru": "\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0432 App Store"\r\n                }\r\n            }\r\n        ],\r\n        "description": {\r\n            "en": "Open the page in App Store and install the app.",\r\n            "fa": "\u0635\u0641\u062d\u0647 \u0631\u0627 \u062f\u0631 App Store \u0628\u0627\u0632 \u06a9\u0646\u06cc\u062f \u0648 \u0628\u0631\u0646\u0627\u0645\u0647 \u0631\u0627 \u0646\u0635\u0628 \u06a9\u0646\u06cc\u062f.",\r\n            "ru": "\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432 App Store \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435."\r\n        }\r\n    },\r\n    "addSubscriptionStep": {\r\n        "description": {\r\n            "en": "Click the button below to add subscription",\r\n            "fa": "\u0628\u0631\u0627\u06cc \u0627\u0641\u0632\u0648\u062f\u0646 \u0627\u0634\u062a\u0631\u0627\u06a9 \u0631\u0648\u06cc \u062f\u06a9\u0645\u0647 \u0632\u06cc\u0631 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f",\r\n            "ru": "\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 \u043d\u0438\u0436\u0435, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443"\r\n        }\r\n    },\r\n    "connectAndUseStep": {\r\n        "description": {\r\n            "en": "Open the app and connect to the server",\r\n            "fa": "\u0628\u0631\u0646\u0627\u0645\u0647 \u0631\u0627 \u0628\u0627\u0632 \u06a9\u0646\u06cc\u062f \u0648 \u0628\u0647 \u0633\u0631\u0648\u0631 \u0645\u062a\u0635\u0644 \u0634\u0648\u06cc\u062f",\r\n            "ru": "\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"optional-fields",children:"Optional Fields"}),"\n",(0,s.jsx)(n.h4,{id:"additional-steps",children:"Additional Steps"}),"\n",(0,s.jsx)(n.p,{children:"You can provide additional instructions before or after adding a subscription:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"additionalBeforeAddSubscriptionStep": {\r\n  "buttons": [\r\n    {\r\n      "buttonLink": "https://example.com/guide",\r\n      "buttonText": {\r\n        "en": "View Guide",\r\n        "fa": "\u0645\u0634\u0627\u0647\u062f\u0647 \u0631\u0627\u0647\u0646\u0645\u0627",\r\n        "ru": "\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e"\r\n      }\r\n    }\r\n  ],\r\n  "description": {\r\n    "en": "Make sure to grant all required permissions",\r\n    "fa": "\u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062d\u0627\u0635\u0644 \u06a9\u0646\u06cc\u062f \u06a9\u0647 \u062a\u0645\u0627\u0645 \u0645\u062c\u0648\u0632\u0647\u0627\u06cc \u0644\u0627\u0632\u0645 \u0631\u0627 \u0627\u0639\u0637\u0627 \u06a9\u0631\u062f\u0647\u200c\u0627\u06cc\u062f",\r\n    "ru": "\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f"\r\n  },\r\n  "title": {\r\n    "en": "Permissions",\r\n    "fa": "\u0645\u062c\u0648\u0632\u0647\u0627",\r\n    "ru": "\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f"\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"additionalAfterAddSubscriptionStep": {\r\n  "buttons": [\r\n    {\r\n      "buttonLink": "https://example.com/guide",\r\n      "buttonText": {\r\n        "en": "View Guide",\r\n        "fa": "\u0645\u0634\u0627\u0647\u062f\u0647 \u0631\u0627\u0647\u0646\u0645\u0627",\r\n        "ru": "\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e"\r\n      }\r\n    }\r\n  ],\r\n  "description": {\r\n    "en": "Make sure to grant all required permissions",\r\n    "fa": "\u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062d\u0627\u0635\u0644 \u06a9\u0646\u06cc\u062f \u06a9\u0647 \u062a\u0645\u0627\u0645 \u0645\u062c\u0648\u0632\u0647\u0627\u06cc \u0644\u0627\u0632\u0645 \u0631\u0627 \u0627\u0639\u0637\u0627 \u06a9\u0631\u062f\u0647\u200c\u0627\u06cc\u062f",\r\n    "ru": "\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f"\r\n  },\r\n  "title": {\r\n    "en": "Permissions",\r\n    "fa": "\u0645\u062c\u0648\u0632\u0647\u0627",\r\n    "ru": "\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f"\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"base64-encoding",children:"Base64 Encoding"}),"\n",(0,s.jsx)(n.p,{children:"Some applications require the subscription URL to be Base64 encoded:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"isNeedBase64Encoding": true\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"mounting-custom-template",children:"Mounting custom template"}),"\n",(0,s.jsx)(n.p,{children:"This can be helpful if you want fully change UI of the subscription page."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["The ",(0,s.jsx)(n.code,{children:"index.html"})," file and all files in the ",(0,s.jsx)(n.code,{children:"assets"})," directory must be mounted into the container at the following paths:"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"volumes:\r\n    - ./index.html:/opt/app/frontend/index.html\r\n    - ./assets:/opt/app/frontend/assets\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["You can find the source ",(0,s.jsx)(n.code,{children:"index.html"})," here:\r\n",(0,s.jsx)(n.a,{href:"https://github.com/localzet/aura-subscriptions/blob/main/frontend/index.html",children:"subscriptions/frontend/index.html"})]}),(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"assets"})," directory is available here:\r\n",(0,s.jsx)(n.a,{href:"https://github.com/localzet/aura-subscriptions/tree/main/frontend/public/assets",children:"subscriptions/frontend/public/assets"})]})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"template-variables",children:"Template Variables"}),"\n",(0,s.jsx)(n.p,{children:"Your HTML template must include three variables:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Variable"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<%= metaTitle %>"})}),(0,s.jsx)(n.td,{children:"Will be resolved as META_TITLE (from .env)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<%= metaDescription %>"})}),(0,s.jsx)(n.td,{children:"Will be resolved as META_DESCRIPTION (from .env)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<%- panelData %>"})}),(0,s.jsxs)(n.td,{children:["Base64\u2011encoded data (string), exactly matching the response from the /api/sub/",(0,s.jsx)(n.code,{children:"<shortUuid>"}),"/info endpoint."]})]})]})]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example of using panelData"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"let panelData\r\npanelData = '<%- panelData %>'\r\ntry {\r\n    panelData = JSON.parse(atob(panelData))\r\n} catch (error) {\r\n    console.error('Error parsing panel data:', error)\r\n}\n"})})]}),"\n",(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsx)(n.p,{children:"After mounting your template, ensure all three variables are present and used correctly in your code. If so, your subscription page will work out of the box without any further modifications."})}),"\n",(0,s.jsx)(n.p,{children:"Restart the subscriptions container to apply the changes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker compose down && docker compose up -d && docker compose logs -f\n"})}),"\n",(0,s.jsx)(n.h3,{id:"custom-app-configjson-custom-apps",children:"Custom app-config.json (custom apps)"}),"\n",(0,s.jsx)(n.p,{children:"Modify your docker-compose.yml file to mount the app-config.json file to the subscriptions container:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"volumes:\r\n    - ./app-config.json:/opt/app/frontend/assets/app-config.json\n"})}),"\n",(0,s.jsx)(n.p,{children:"Restart the subscriptions container to apply the changes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker compose down && docker compose up -d && docker compose logs -f\n"})}),"\n",(0,s.jsx)(n.h3,{id:"full-example",children:"Full Example"}),"\n",(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"https://raw.githubusercontent.com/localzet/aura-subscriptions/refs/heads/main/frontend/public/assets/app-config.json",children:"complete example"})," to understand how to configure multiple applications across different platforms."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},721:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/subscriptions-f7c43c1b832d3ac156d5e61ed64fd786.webp"},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var i=r(6540);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);