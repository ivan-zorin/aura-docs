"use strict";(self.webpackChunk_localzet_aura_docs=self.webpackChunk_localzet_aura_docs||[]).push([[1368],{114:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"install/reverse-proxies/caddy","title":"Caddy","description":"Lightweight reverse proxy with automatic SSL certificates and zero configuration","source":"@site/docs/install/reverse-proxies/caddy.md","sourceDirName":"install/reverse-proxies","slug":"/install/reverse-proxies/caddy","permalink":"/docs/install/reverse-proxies/caddy","draft":false,"unlisted":false,"editUrl":"https://github.com/localzet/aura-docs/tree/main/docs/install/reverse-proxies/caddy.md","tags":[],"version":"current","lastUpdatedBy":"Ivan Zorin","lastUpdatedAt":1750179473000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Caddy","description":"Lightweight reverse proxy with automatic SSL certificates and zero configuration"},"sidebar":"tutorialSidebar","previous":{"title":"Reverse Proxies","permalink":"/docs/install/reverse-proxies/"},"next":{"title":"Nginx","permalink":"/docs/install/reverse-proxies/nginx"}}');var i=r(4848),t=r(8453),d=r(4499),s=r(4446);const a={sidebar_position:1,title:"Caddy",description:"Lightweight reverse proxy with automatic SSL certificates and zero configuration"},c=void 0,l={},h=[{value:"Overview",id:"overview",level:2},...d.RM,{value:"Caddy configuration",id:"caddy-configuration",level:2},{value:"Simple configuration",id:"simple-configuration",level:3},{value:"Create docker-compose.yml",id:"create-docker-composeyml",level:3},{value:"Start the container",id:"start-the-container",level:3},...s.RM];function p(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"In this guide we will be using Caddy as a reverse proxy to access the Aura panel.\r\nWe will point a domain name to our server and configure Caddy. Caddy will handle issuance of the SSL certificates by itself."}),"\n",(0,i.jsx)(d.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"caddy-configuration",children:"Caddy configuration"}),"\n",(0,i.jsx)(n.h3,{id:"simple-configuration",children:"Simple configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Create a file called ",(0,i.jsx)(n.code,{children:"Caddyfile"})," in the ",(0,i.jsx)(n.code,{children:"/opt/aura/caddy"})," directory."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p /opt/aura/caddy && cd /opt/aura/caddy && nano Caddyfile\n"})}),"\n",(0,i.jsx)(n.p,{children:"Paste the following configuration."}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsxs)(n.p,{children:["Please, replace ",(0,i.jsx)(n.code,{children:"REPLACE_WITH_YOUR_DOMAIN"})," with your domain name."]}),(0,i.jsx)(n.p,{children:"Review the configuration below, look for red highlighted lines."})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-caddy",metastring:'title="Caddyfile"',children:"// highlight-next-line-red\r\nhttps://REPLACE_WITH_YOUR_DOMAIN {\r\n        reverse_proxy * http://aura-backend:3000\r\n}\r\n:443 {\r\n    tls internal\r\n    respond 204\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"create-docker-composeyml",children:"Create docker-compose.yml"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file in the ",(0,i.jsx)(n.code,{children:"/opt/aura/caddy"})," directory."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd /opt/aura/caddy && nano docker-compose.yml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Paste the following configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:"services:\r\n    caddy:\r\n        image: caddy:2.9\r\n        container_name: 'caddy'\r\n        hostname: caddy\r\n        restart: always\r\n        ports:\r\n            - '0.0.0.0:443:443'\r\n        networks:\r\n            - aura-network\r\n        volumes:\r\n            - ./Caddyfile:/etc/caddy/Caddyfile\r\n            - caddy-ssl-data:/data\r\n\r\nnetworks:\r\n    aura-network:\r\n        name: aura-network\r\n        driver: bridge\r\n        external: true\r\n\r\nvolumes:\r\n    caddy-ssl-data:\r\n        driver: local\r\n        external: false\r\n        name: caddy-ssl-data\n"})}),"\n",(0,i.jsx)(n.h3,{id:"start-the-container",children:"Start the container"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose up -d && docker compose logs -f -t\n"})}),"\n",(0,i.jsx)(s.Ay,{})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},4446:(e,n,r)=>{r.d(n,{Ay:()=>s,RM:()=>t});var o=r(4848),i=r(8453);const t=[{value:"Open the panel in the browser",id:"open-the-panel-in-the-browser",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const n={h2:"h2",h3:"h3",img:"img",p:"p",...(0,i.R)(),...e.components},{Button:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Button",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"open-the-panel-in-the-browser",children:"Open the panel in the browser"}),"\n",(0,o.jsx)(n.p,{children:"Open the configured domain name in the browser and you will see the login page."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"login-page",src:r(3935).A+"",width:"960",height:"720"})}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(t,{label:"Ask community",link:"https://t.me/+YxzE4bOmEog2Zjhi",variant:"secondary",size:"md",outline:!0,style:{marginBottom:"1rem"}})]})}function s(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},4499:(e,n,r)=>{r.d(n,{Ay:()=>s,RM:()=>t});var o=r(4848),i=r(8453);const t=[{value:"Point domain to your server",id:"point-domain-to-your-server",level:2},{value:"DNS provider",id:"dns-provider",level:3}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsx)(n.p,{children:"You need to have a registered domain name to continue."})}),"\n",(0,o.jsx)(n.h2,{id:"point-domain-to-your-server",children:"Point domain to your server"}),"\n",(0,o.jsx)(n.p,{children:"Check your server's IP address. It is better to use a static IPv4 address."}),"\n",(0,o.jsx)(n.p,{children:"Now, you need to point your domain name to this IP address."}),"\n",(0,o.jsxs)(n.p,{children:["For example, it will be ",(0,o.jsx)(n.code,{children:"my-super-panel.com"})," -> ",(0,o.jsx)(n.code,{children:"193.122.122.122"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"There are two ways to do this:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Use a DNS provider (e.g. Cloudflare, Google Cloud, etc.)"}),"\n",(0,o.jsx)(n.li,{children:"Use a registrar (e.g. Namecheap, etc.)"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"dns-provider",children:"DNS provider"}),"\n",(0,o.jsx)(n.p,{children:"If you are using Cloudflare, you need to add a A/AAAA record (for IPv4 and IPv6 respectively) to your DNS records."}),"\n",(0,o.jsxs)(n.p,{children:["Log in to your Cloudflare account ",(0,o.jsx)(n.a,{href:"https://dash.cloudflare.com/login",children:"here"})," and select the desired domain."]}),"\n",(0,o.jsxs)(n.p,{children:["On the left side of the page, click on ",(0,o.jsx)(n.code,{children:"DNS"})," and then click on ",(0,o.jsx)(n.code,{children:"Records"}),". Click on ",(0,o.jsx)(n.code,{children:"Create record"}),".",(0,o.jsx)(n.br,{}),"\n","Set the ",(0,o.jsx)(n.code,{children:"Type"})," to ",(0,o.jsx)(n.code,{children:"A"})," and the ",(0,o.jsx)(n.code,{children:"Name"})," to ",(0,o.jsx)(n.code,{children:"@"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["If you want to use subdomains, you should enter the subdomain name (e.g. ",(0,o.jsx)(n.code,{children:"panel"}),") in the ",(0,o.jsx)(n.code,{children:"Name"})," field."]})}),"\n",(0,o.jsxs)(n.p,{children:["Enter your server's IP address in the ",(0,o.jsx)(n.code,{children:"IPv4 address"})," field. and click on ",(0,o.jsx)(n.code,{children:"Save"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Now you need to wait a while for the DNS records to be updated."}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsx)(n.p,{children:"There is a big difference between yellow cloud (domain is proxied by Cloudflare) and grey cloud (domain is not proxied by Cloudflare) in the Cloudflare control panel."}),(0,o.jsx)(n.p,{children:"If Cloudflare works fine in your region, it is better to proxy the domain through Cloudflare. (Yellow cloud)"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"static",src:r(7789).A+"",width:"1246",height:"529"})}),"\n",(0,o.jsx)(n.p,{children:"Some DNS providers have a different interface, but the overall process is the same."})]})}function s(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},7789:(e,n,r)=>{r.d(n,{A:()=>o});const o=r.p+"assets/images/cloudflare-dns-bd3780300a96c4c5995bc0a9c86d21d9.webp"},3935:(e,n,r)=>{r.d(n,{A:()=>o});const o=r.p+"assets/images/login-page-6236b327e75fd1535d4c5f275eabbd20.webp"},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>s});var o=r(6540);const i={},t=o.createContext(i);function d(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);